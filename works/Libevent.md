# LIBEVENTå­¦ä¹ ç¬”è®°
> å¥½ä¹…æ²¡åœ¨GITä¸Šé¢å†™ç‚¹ä¸œè¥¿äº†ï¼Œèœé¸¡çš„ä¸»åŠ¨å­¦ä¹ èƒ½åŠ›ä¸è¶³ï¼Œæ²¡å¤šä¹…å°±åˆ°äº†è‡ªå·±çš„æ€§èƒ½ç“¶é¢ˆï¼Œé€‚é€¢æœ€è¿‘æœ‰æ–°å¤§ä½¬å¸¦å¼•æ“æ–¹é¢çš„çŸ¥è¯†ï¼Œäºæ˜¯å¼€å§‹å­¦ä¹ libeventç›¸å…³çš„çŸ¥è¯†ã€‚
> 
![å›¾ä¾µåˆ ](https://camo.githubusercontent.com/911381096c669dd9fef3699539e6b9cf38b0ef4aac3a546f76741bc919d1bd9a/68747470733a2f2f6c69626576656e742e6f72672f6c69626576656e74332e706e67)
---

ğŸ¤é¡ºå¸¦åæ§½ä¸‹ï¼Œé¡¹ç›®ç”¨çš„redmineæ„Ÿè§‰å°±æ˜¯å¼€å•æ”¹è¿›åº¦å…³å•çš„å·¥å…·ï¼Œå…¬å¸ä¹Ÿæ²¡æœ‰ç”¨gitåšé¡¹ç›®ç®¡ç†ï¼Œ
æœ€è¿‘å€’æ˜¯å¤šäº†ä¸ªå«TAPDçš„ç©æ„ï¼Œä¼°è®¡æ˜¯ä¼é¹…é‚£è¾¹çš„éœ€æ±‚å§ï¼Œé¡¹ç›®ç®¡ç†çœŸæ²¡åŠ²ğŸ‘

---
## æ¥ä¸‹æ¥ä¼šè·Ÿç€å®˜æ–¹æ–‡æ¡£æ­¥æ­¥èµ°
> [å®˜æ–¹æ–‡æ¡£ä¼ é€é—¨]http://www.wangafu.net/~nickm/libevent-book/ å½“å‰ç¬”è®°å¯¹åº”æ–‡æ¡£ç‰ˆæœ¬ï¼šLast updated 2012-01-31 09:28:39 EDT
> 
> å½“å‰ä½¿ç”¨libeventç‰ˆæœ¬libevent-2.1.12-stable Released 2020-07-05.
### R0: Preliminaries (ç¬¬ä¸€æ­¥ï¼Œä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·)
#### libevent ç”±ä¸‹åˆ—ç»„ä»¶æ„æˆï¼š
ç»„ä»¶å|æè¿°
--|:--:
evutil|ç”¨äºæŠ½è±¡ä¸åŒå¹³å°ç½‘ç»œå®ç°å·®å¼‚çš„é€šç”¨åŠŸèƒ½ã€‚
event && event_base|libevent çš„æ ¸å¿ƒï¼Œä¸ºå„ç§å¹³å°ç‰¹å®šçš„ã€åŸºäºäº‹ä»¶çš„éé˜»å¡ IO åç«¯æä¾›æŠ½è±¡ APIï¼Œè®©ç¨‹åºå¯ä»¥çŸ¥é“å¥—æ¥å­—ä½•æ—¶å·²ç»å‡†å¤‡å¥½ï¼Œå¯ä»¥è¯»æˆ–è€…å†™ï¼Œå¹¶ä¸”å¤„ç†åŸºæœ¬çš„è¶…æ—¶åŠŸèƒ½ï¼Œæ£€æµ‹ OS ä¿¡å·ã€‚
bufferevent|ä¸º libevent åŸºäºäº‹ä»¶çš„æ ¸å¿ƒæä¾›ä½¿ç”¨æ›´æ–¹ä¾¿çš„å°è£…ã€‚é™¤äº†é€šçŸ¥ç¨‹åºå¥—æ¥å­—å·²ç»å‡†å¤‡å¥½è¯»å†™ä¹‹å¤–ï¼Œè¿˜è®©ç¨‹åºå¯ä»¥è¯·æ±‚ç¼“å†²çš„è¯»å†™æ“ä½œï¼Œå¯ä»¥çŸ¥é“ä½•æ—¶IOå·²ç»çœŸæ­£å‘ç”Ÿï¼›buffereventæ¥å£æœ‰å¤šä¸ªåç«¯ï¼Œå¯ä»¥é‡‡ç”¨ç³»ç»Ÿèƒ½å¤Ÿæä¾›çš„æ›´å¿«çš„éé˜»å¡ IO æ–¹å¼ï¼Œå¦‚ Windows ä¸­çš„ IOCPã€‚
evbuffer|åœ¨ bufferevent å±‚ä¹‹ä¸‹å®ç°äº†ç¼“å†²åŠŸèƒ½ï¼Œå¹¶ä¸”æä¾›äº†æ–¹ä¾¿æœ‰æ•ˆçš„è®¿é—®å‡½æ•°ã€‚
evhttp|ä¸€ä¸ªç®€å•çš„ HTTP å®¢æˆ·ç«¯/æœåŠ¡å™¨å®ç°ã€‚
evdns|ä¸€ä¸ªç®€å•çš„ DNS å®¢æˆ·ç«¯/æœåŠ¡å™¨å®ç°ã€‚
evrpc|ä¸€ä¸ªç®€å•çš„ RPC å®ç°ã€‚
#### libeventä¸­çš„åº“:
åº“å|æè¿°
--|:--:
ibevent_core|æ‰€æœ‰æ ¸å¿ƒçš„äº‹ä»¶å’Œç¼“å†²åŠŸèƒ½ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ event_baseã€evbufferã€bufferevent å’Œå·¥å…·å‡½æ•°ã€‚
ibevent_extra|å®šä¹‰äº†ç¨‹åºå¯èƒ½éœ€è¦ï¼Œä¹Ÿå¯èƒ½ä¸éœ€è¦çš„åè®®ç‰¹å®šåŠŸèƒ½ï¼ŒåŒ…æ‹¬ HTTPã€DNS å’Œ RPCã€‚
libevent|è¿™ä¸ªåº“å› ä¸ºå†å²åŸå› è€Œå­˜åœ¨ï¼Œå®ƒåŒ…å« libevent_core å’Œ libevent_extra çš„å†…å®¹ã€‚ä¸åº”è¯¥ä½¿ç”¨è¿™ä¸ªåº“ï¼Œæœªæ¥ç‰ˆæœ¬çš„ libevent å¯èƒ½å»æ‰è¿™ä¸ªåº“ã€‚
---
æŸäº›å¹³å°ä¸Šå¯èƒ½å®‰è£…ä¸‹åˆ—åº“:
åº“å|æè¿°
--|:--:
libevent_pthreads|æ·»åŠ åŸºäº pthread å¯ç§»æ¤çº¿ç¨‹åº“çš„çº¿ç¨‹å’Œé”å®šå®ç°ã€‚å®ƒç‹¬ç«‹äºlibevent_coreï¼Œè¿™æ ·ç¨‹åºä½¿ç”¨ libevent æ—¶å°±ä¸éœ€è¦é“¾æ¥åˆ° pthreadï¼Œé™¤éæ˜¯ä»¥å¤šçº¿ç¨‹æ–¹å¼ä½¿ç”¨ libeventã€‚
libevent_openssl|è¿™ä¸ªåº“ä¸ºä½¿ç”¨ bufferevent å’Œ OpenSSL è¿›è¡ŒåŠ å¯†çš„é€šä¿¡æä¾›æ”¯æŒã€‚å®ƒç‹¬ç«‹äº libevent_coreï¼Œè¿™æ ·ç¨‹åºä½¿ç”¨ libevent æ—¶å°±ä¸éœ€è¦é“¾æ¥åˆ° OpenSSLï¼Œé™¤éæ˜¯è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚
#### å…³äºç‰ˆæœ¬ï¼š
â‘ 1.3ä¹‹å‰æ˜¯BUGç‰ˆæœ¬ï¼Œ1.4ä¹‹å‰åªæœ‰ä¸€ä¸ªlibeventåº“ï¼Œ2.0ä¹‹å‰çº¿ç¨‹ä¸å®‰å…¨ï¼ˆæ— lockï¼Œconditionæœºåˆ¶ï¼‰ï¼Œæ–°çš„å¤´æ–‡ä»¶éƒ½åœ¨event2æ–‡ä»¶å¤¹ä¸­ï¼Œä¸ºäº†å…¼å®¹æ—§çš„å¤´æ–‡ä»¶ï¼Œå¼€å‘æ—¶å°½å¯èƒ½ä¸è¦ç”¨åˆ°æ—§çš„ç©æ„ï¼Œæ¯•ç«Ÿæ²¡æœ‰äººç»´æŠ¤æ˜¯æœ€å¤§çš„é—®é¢˜ã€‚

â‘¡ç‰ˆæœ¬å·çš„å‘ï¼šlibeventç‰ˆæœ¬å·ä¼šåœ¨ç¼–è¯‘æ—¶ç¡®å®šå®å®šä¹‰çš„ï¼Œä½†å¦‚æœä½¿ç”¨åŠ¨æ€åº“ï¼Œå°±ä¸èƒ½ä¿è¯æ¥å£è¿”å›çš„ç‰ˆæœ¬å·äº†ã€‚

`#define LIBEVENT_VERSION_NUMBER ~= ev_uint32_t event_get_version_number(void)`

---
### R1: Setting up the Libevent library (è®¾ç½®libevent)

### R2: Getting an event_base (ä½¿ç”¨event_base)
### R3: Running an event loop (ä½¿ç”¨äº‹ä»¶å¾ªç¯)
### R4: Working with events (ä¸äº‹ä»¶ä¸€èµ·å·¥ä½œ)
### R5: Utility and portability functions (æ‰©å±•å’Œå¯ç§»æ¤å‡½æ•°)
### R6: Bufferevents: concepts and basics (*bufferevents*çš„æ¦‚å¿µä¸åŸºç¡€)
### R6: Bufferevents: advanced topics (*bufferevent*è¿›é˜¶ä½¿ç”¨)
### R7: Evbuffers: utility functionality for buffered IO (*evbuffer*:ç¼“å­˜IOçš„é«˜æ•ˆä¸”å®ç”¨çš„æ–¹å¼)
### R8: Connection listeners: accepting TCP connections (ç›‘å¬å¹¶æ¥å—TCPè¿æ¥)
### R9: DNS for Libevent (ä½¿ç”¨libeventçš„DNSåŠŸèƒ½)
